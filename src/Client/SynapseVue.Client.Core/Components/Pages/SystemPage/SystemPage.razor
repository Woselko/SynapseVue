@page "/system"
@inherits AppComponentBase


<div class="page-container">
    <form method="post" class="form">
        <h1 class="form-title">System Settings Page</h1>
        @if (isLoading)
        {
            <div class="loading-contianer">
                <BitSpinner Size="BitSpinnerSize.Large"></BitSpinner>
            </div>
        }
        else
        {
            <div class="content-container danger-panel">
                <BitTypography Variant="BitTypographyVariant.H5" 
                    Style=@safeModeStylesTitle>
                    Current SynapseVue state: @systemState.Mode
                </BitTypography>
                <br />
                <br />
                <BitButton ButtonStyle="BitButtonStyle.Standard"
                           Style=@safeModeStylesLabel
                           OnClick="ChangeState">
                           @buttonLabel
                </BitButton>
                <br />
                <br />
                <BitButton ButtonStyle="BitButtonStyle.Standard"
                           Style="color: #dc0000; border-color: #dc0000"
                           OnClick="Reboot">
                           Reboot System
                </BitButton>
            </div>
        }
    </form>
</div>

@code {
    private string buttonLabel => isSafeMode ? "Switch to Home" : "Switch to Safe";
    private string safeModeStylesTitle => isSafeMode ? "color: #00ac1d;border-bottom: 1px solid #00ac1d" : "color: #dc0000;border-bottom: 1px solid #dc0000";
    private string safeModeStylesLabel => !isSafeMode ? "color: #00ac1d; border-color: #00ac1d" : "color: #dc0000; border-color: #dc0000";
}